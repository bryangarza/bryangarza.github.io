<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Home</title>
<meta name="generator" content="Org mode">
<meta name="author" content="Bryan Garza">
<meta name="description" content="Account of the CHON concert in San Francisco
Recap of flashing Coreboot onto x230
First impressions switching to MATE
A review of the Leopold FC750R keyboard
How define desugars in Racket
How to use dynamic scope in Racket
How to use sexprs for inter-process communication
How to start using syntax extensions
Abstract types versus concrete types
Difference between using signatures and annotations in OCaml
How I create new blog posts
Solution to a graph problem from CTCI"
>
<meta name="keywords" content="math rock, live music, concert x230, coreboot, hardware flashing i3wm, MATE, window managers, desktop environments, productivity, Linux workflow leopold fc750r, mechanical keyboards, product review, typing racket, scheme, desugar, define, let, letrec racket, scope, dynamic, static s-expressions, sexprs, lisp, ocaml, ipc, serialization ocaml, syntax extensions, oasis ocaml, invariants, concrete types, abstract types ocaml, types emacs, org-mode, blogging, elisp ocaml, algorithms, graphs, cracking the coding interview">

<link href="./css/styles2.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="./css/styles.css"/>
</head>
<body>
<div id="preamble" class="status">
<h1 class="title"><a href="http://bryangarza.github.io">Bryan Garza</a></h1>
</div>
<div id="content">
<p>
My interests include programming language theory / type theory, distributed
systems, Linux, math rock, post-rock, high-end audio, and foreign languages.
</p>

<p>
I&rsquo;m a software engineer at Amazon Lab126.
</p>

<p>
~ <a href="https://github.com/bryangarza">GitHub</a>, <a href="mailto:bry@riseup.net">Contact</a>, <a href="bry.asc">PGP key</a>, <a href="http://themattchan.com/plquotes.html">PL quotes</a>
</p>

<div id="outline-container-org61a5ee2" class="outline-2">
<h2 id="org61a5ee2">All Posts <span class="archive"><a href="http://bryangarza.github.io/archive.html">(Archive)</a></span></h2>
<div class="outline-text-2" id="text-org61a5ee2">
<div class="lines">
<p>
<div class="outline-3"><h3><a href="./chon-concert-with-tricot-polyphia-and-ttng.html"> CHON concert (with Tricot, Polyphia, and TTNG)</a><span> </span><span class="timestamp-wrapper"><span class="timestamp">( July 26, 2018)</span></span></h3>
</p>

<p>
Last month I went to the CHON concert in SF with a friend. <a href="http://tricot.tv/">Tricot</a> is my favorite
band and there was no way I was going to miss the chance to see them live. It
was an amazing show. Tricot&rsquo;s set was a bit short but they played some of my
favorite songs including <b>18,19</b>. Being in a crowd where everyone is immersed in
the music is a strange feeling, like when you get shivers down your
spine. Towards the end of the concert we went to buy some merch and Tricot was
there, so I met them and we took a picture together. Really surprised that even
happened, isn&rsquo;t it rare for bands to just hang out after their set?
</p>

<p>
Next, I want to see <a href="http://www.motfd.com/">Mass of the Fermenting Dregs</a>. They just released a new album
(titled <i>No New World</i>) after 8 years. It&rsquo;s so damn good x_x. Hopefully I can
catch a show when I visit Japan.
</p>

<p>
</div>
</p>

</div>

<div class="lines">
<p>
<div class="outline-3"><h3><a href="./x230-coreboot-flashing-process.html"> x230 Coreboot Flashing Process</a><span> </span><span class="timestamp-wrapper"><span class="timestamp">( August 23, 2017)</span></span></h3>
</p>

<p>
I flashed <a href="https://www.coreboot.org">coreboot</a> onto my x230, using a Raspberry Pi Model B Rev 2.0. These are
the resources I used (other than the coreboot wiki):
</p>
<ul class="org-ul">
<li><a href="https://vimeo.com/177951809">Installing Coreboot On An X230 Laptop</a> (video)</li>
<li><a href="https://tylercipriani.com/blog/2016/11/13/coreboot-on-the-thinkpad-x220-with-a-raspberry-pi/">Coreboot On The ThinkPad X220 With A Raspberry Pi</a>, <a href="https://web.archive.org.org/web/20170824034651/https://tylercipriani.com/blog/2016/11/13/coreboot-on-the-thinkpad-x220-with-a-raspberry-pi/">archive.org</a></li>
<li><a href="https://blog.noq2.net/corebooting-thinkpad-x230.html">Corebooting Thinkpad X230</a>, <a href="https://web.archive.org.org/web/20170824034758/https://blog.noq2.net/corebooting-thinkpad-x230.html">archive.org</a></li>
<li><a href="https://blog.noq2.net/corebooting-thinkpad-x230.html">Coreboot on the lenovo x230</a>, <a href="https://web.archive.org.org/web/20170824034927/https://www.ericholzbach.net/blog/x230_coreboot/">archive.org</a></li>
<li><a href="https://www.ericholzbach.net/blog/x230_coreboot/">Coreboot for x230</a></li>
<li><a href="https://github.com/bibanon/Coreboot-ThinkPads/wiki/Hardware-Flashing-with-Raspberry-Pi">Hardware Flashing with Raspberry Pi</a> (<a href="https://camo.githubusercontent.com/60f9bf2435afff147b8cf58c88376149fdcc9580/687474703a2f2f692e696d6775722e636f6d2f576b4e764f55792e706e67">Raspberry Pi Model B pin layout</a>, <a href="img/raspberry-pi-B_gpio-layout.png">mirror</a>)</li>
</ul>

<p>
There are 2 ways to provide power to the BIOS chip. One way is to enable
Wake-On-LAN on the existing BIOS and connect the AC adapter and an Ethernet
cable; the computer should then supply 3.3V to the chip. However, I was unable
to get that working, so instead I connected the Pi&rsquo;s pin #17 to pin #8 of the
Macronix chip (<a href="http://html.alldatasheet.com/html-pdf/575458/MCNIX/MX25L3208EM2I12G/1149/7/MX25L3208EM2I12G.html">spec sheet</a>).
</p>

<p>
Disassembly was dead-easy, though for next time, I ordered some plastic pry
tools. Since I couldn&rsquo;t read the chip&rsquo;s model (too much glue residue), I read
each of the four possible chips 3 times each, just in case. In hindsight, before
putting everything back together I could&rsquo;ve used the <a href="https://github.com/corna/me_cleaner">me_cleaner</a> script to remove
the Intel ME firmware from the flash chip. Right now <code>flashrom</code> reports that the
Management Region is locked, meaning I&rsquo;ll have to do another hardware flash to
get rid of it (there are some cases where this region has read/write permissions
and you can just do an internal flash).
</p>

<p>
Since flashing, I&rsquo;ve had no issues, everything is working perfectly. I bought a
7260 ac card to replace my dog slow Centrino Wireless-N 2200 (since there&rsquo;s no
whitelist anymore).
</p>

</div>

<div class="lines">
<p>
<div class="outline-3"><h3><a href="./what-i-want-from-window-managers-switching-from-i3-to-mate.html"> What I Want From Window Managers (Switching from i3 to MATE)</a><span> </span><span class="timestamp-wrapper"><span class="timestamp">( August 20, 2017)</span></span></h3>
</p>

<p>
I decided to try and switch to a different window manager, namely because I was
tired of switching to the wrong workspace in i3. Even though I for the most part
put the same applications on the same workspaces each time, I still spend too
much time fumbling with which workspace I want. I tend to want at most 2 windows
in view, usually as split columns. Occasionally I&rsquo;ll want 3 windows visible at
once, but for the most part my workflow is having one or two visible
windows. I&rsquo;ve put up with i3&rsquo;s manual layouts for years, mostly because its
<a href="https://i3wm.org/i3bar/">i3bar</a> supports system applets out-of-the-box and it&rsquo;s too much effort to set up
another window manager to work similarly, effort that could be spend working on
something more productive.
</p>

<p>
Before I get into more detail, here&rsquo;s some background on what window managers or
desktop environments I&rsquo;ve used:
</p>

<ul class="org-ul">
<li>GNOME 3: Sophomore year of high school I began to use Ubuntu</li>
<li>XFCE: I remember at some point I switched to Xubuntu</li>
<li>dwm: During junior year of high school, I switched to Arch Linux</li>
<li>xmonad: I dabbled in this one for a few months as well</li>
<li>i3wm: By the end of junior year I had switched to i3 for what I then
considered to be &ldquo;sane&rdquo; multi-monitor support</li>
<li>Aqua: Throughout college I used OS X (this was before I understood the gravity
and importance of privacy)</li>
<li>i3wm: I came back to using GNU/Linux a few months after finishing school, and
naturally gravitated back to the last window manager I had used</li>
<li>MATE: As of writing this post, I&rsquo;ve switched to a floating window manager,
after analyzing my usual workflow</li>
</ul>

<p>
During the time that I used dwm/xmonad/i3 in high school, I was active in the
Arch Linux forums, as well as the <code>#archlinux</code> IRC channel. Back then, I was still
learning to program and spent much of my time ricing my setup. As time went on
and I became a decent programmer, I realized how I just wanted things to work
correctly without fiddling, and that spending hours tweaking color schemes and
other settings was a waste of my time. Furthermore, using OS X was a total 180
from what I was previously used to, which required writing scripts for
everything and manually binding to various keys, as well as manually triggering
<code>arandr</code> commands to change my monitor layouts, etc.
</p>

<p>
When I switched back to GNU/Linux last year I knew that I wanted to maintain the
level of ease that is in OS X, at least for the essentials. One of those thing
is the use of <code>alt-tab</code>. This doesn&rsquo;t really seem to be available in any tiling
window managers. I started using <a href="https://davedavenport.github.io/rofi/">rofi</a> as a wannabe alt-tab switcher, but
disliked having to type the beginning of a window&rsquo;s name to switch to it.
</p>

<p>
One thing that drives me nuts to configure is status bars and applet trays. I
really don&rsquo;t see the point in setting them up, and tiling window managers that
ship without a decent status bar get a hard pass from me.
</p>

<p>
My requirements, therefore, for switching to another window manager or desktop
environment are that (1) there has to be an alt-tab switcher, (2) the status bar
has to work out-of-the-box and support applets.
</p>

<p>
Having heard of <a href="https://mate-desktop.org/">MATE</a> from a friend, I decided to give it a shot. First I
installed the most minimal package from the Debian repositories, but then
realized that even the full install didn&rsquo;t include that many extras. I also
installed <code>mate-tweak</code> to be able to change some extra settings.
</p>

<p>
The switch was also catalyzed by having read <a href="http://xahlee.info/linux/why_tiling_window_manager_sucks.html">Why Tiling Window Manager Sucks</a> by
Xah Lee. I&rsquo;ve always respected his expertise on emacs, ergonomics, and general
GNU/Linux usage, and it got me thinking that perhaps I was taking the wrong
approach to window management, too chord-centric and complicated for what should
require a minimal number of window manager actions, namely split left, split
right, maximize window, close window, and rotate to next application.
</p>

<p>
I removed most of the default MATE bindings, bound some of the Function keys to
the previously mentioned most common window manager actions, and set up <a href="http://xahlee.info/linux/linux_add_keyboard_shortcuts_to_switch_to_app.html">wmctrl
to switch to specific applications</a>. I also tried out Compiz for about an hour
but it seemed buggy to me so I quickly went back to the &ldquo;Marco (Compton GPU
Compositor)&rdquo; setting.
</p>

<p>
So far, my current setup is basically how I use <a href="https://www.spectacleapp.com/">Spectacle</a> on OS X, but without
using as many chords. Like I mentioned earlier, all I really want is to be able
to put emacs on the left half, and either Chromium or urxvt on the right. For
less used applications, I want to alt-tab to them. Simple as that. I don&rsquo;t need
the tiling (manual or automatic), because if I&rsquo;m working on the x230, I don&rsquo;t
have much screen real estate anyways, and if I&rsquo;m using the external monitor,
well, I still don&rsquo;t want to have more than 2 or 3 visible windows.
</p>

<p>
One unexpected side effect of switching to MATE is that monitors automatically
work when plugged in. For i3, what I do is create an arandr script for each
specific setup (HDMI only, HDMI with ThinkPad monitor on left, living room TV
with ThinkPad on right, etc), and then launch said script with rofi. It&rsquo;s not
ideal, and sometimes X freaks out on me and I get a black screen, forcing me to
switch to another tty to kill the X server. I don&rsquo;t know if MATE will also have
similar issues but at least when I plug in my external monitor, it&rsquo;s
automatically enabled and the placement is saved. When I unplug the external
monitor, it works like it should, changing to only use the ThinkPad monitor, and
when the ThinkPad is closed and I disconnect the monitor, the ThinkPad goes to
sleep like it should.
</p>

<p>
I&rsquo;m still using <a href="https://i3wm.org/i3lock/">i3lock</a> (it seems to work on any WM or DE without having to touch
it).
</p>

<p>
The monitor support in MATE (or any other Desktop Environment, I&rsquo;m assuming) is
enough reason to switch from a tiling window manager, or to switch to a
combination of Desktop Environment plus tiling wm. It&rsquo;s 2017, no one should be
using a tiling window manager standalone.
</p>

<p>
I&rsquo;ve only had this setup for a day, and therefore haven&rsquo;t fully explored the
pros and cons of i3 vs MATE (or tiling window managers vs Desktop Environments
in the large); later on I might write a follow-up post, but for now, these are
my first impressions.
</p>

</div>

<div class="lines">
<p>
<div class="outline-3"><h3><a href="./leopold-fc750r-mechanical-keyboard-review.html"> Leopold FC750R Mechanical Keyboard Review</a><span> </span><span class="timestamp-wrapper"><span class="timestamp">( August 14, 2017)</span></span></h3>
</p>

<p>
I&rsquo;ve been using the Leopold FC750R (the white PBT, brown Cherry MX model) over
the past 6 months, both in the office and at home. I decided to get the
tenkeyless model instead of the smaller variant, so that the arrow keys would
not be tucked next to the right Control key and other modifiers.
</p>

<p>
Pros:
</p>
<ul class="org-ul">
<li>Side-printed keys, letters will never smudge or wear off</li>
<li>Feels well-built</li>
<li>Supposedly there&rsquo;s a rubber mat at the bottom of the case, to dampen echo</li>
<li>Satisfying color; it&rsquo;s an off-white/arctic color</li>
</ul>

<p>
Cons
</p>
<ul class="org-ul">
<li>Not programmable</li>
<li>Port for USB is tucked in a groove underneath instead of directly in the back,
not good for those who use thick braided cables</li>
</ul>

<p>
For my next keyboard, I am thinking of buying/building a Planck. It&rsquo;s much
smaller, the keys are arranged in columns instead of staggered, and it&rsquo;s
programmable. I realized I need another keyboard for travel because I recently
traveled to Los Angeles and brought my ThinkPad but not my keyboard. The desk at
the hotel was way too tall, making it uncomfortable to type directly on the
laptop keyboard. I resorted to sitting on the bed cross-legged with the ThinkPad
on my lap, or on the desk chair. Needless to say, it would have been more
comfortable to have an external keyboard on my lap and place the laptop on the
desk. However, since this keyboard is somewhat hefty and large, I didn&rsquo;t want to
travel with it (I&rsquo;ve been lugging it back and forth to the office for the past 6
months and that&rsquo;s been fine though).
</p>

<p>
There are some dip switches but I didn&rsquo;t toggle any of them. On OS X I use
<a href="https://pqrs.org/osx/karabiner/">Karabiner</a> to flip the function and media keys, as well as to make Control
function as Escape when pressed by itself (since I changed Caps Lock to Control
in the System Preferences).
</p>

<p>
About 1/3rd of the way down in <a href="img/fc750r.jpg">this graphic</a> you can see what the media keys are
mapped to. They work out-of-the box in Linux.
</p>

</div>

<div class="lines">
<p>
<div class="outline-3"><h3><a href="./exploring-racket-forms-define-and-letrec.html"> Exploring Racket Forms: define and letrec</a><span> </span><span class="timestamp-wrapper"><span class="timestamp">( March 11, 2016)</span></span></h3>
</p>

<p>
A couple weeks ago I was trying to understand why expressions like this were
valid:
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">define</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">future-bound</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">define</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-function-name">f</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span>+ x 1<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">define</span> <span class="org-function-name">x</span> 5<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>f<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Why can you define the <code>x</code> after its usage in <code>f</code>? I initially thought that <code>define</code>
desugared into nested <code>let</code>&rsquo;s or perhaps <code>let*</code>, like this:
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">[</span>f <span class="org-rainbow-delimiters-depth-4">(</span>+ x 1<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">[</span>x 5<span class="org-rainbow-delimiters-depth-4">]</span><span class="org-rainbow-delimiters-depth-3">)</span>
    f<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">[</span>f <span class="org-rainbow-delimiters-depth-4">(</span>+ x 1<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">]</span>
       <span class="org-rainbow-delimiters-depth-3">[</span>x 5<span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">)</span>
  f<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
But neither made sense, since we still have the same problem of <code>x</code> being bound
after <code>f</code> is bound. It turns out that <code>define</code> desugars into <code>letrec</code>:
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">letrec</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">[</span>f <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">&#955;</span> <span class="org-rainbow-delimiters-depth-5">()</span> <span class="org-rainbow-delimiters-depth-5">(</span>+ x 1<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">]</span>
         <span class="org-rainbow-delimiters-depth-3">[</span>x 5<span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>f<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
This works because <code>letrec</code> initializes the bindings for each of the symbols, to
something akin to <code>undefined</code>. After that, all bindings are initialized to their
values at once. This allows bindings to reference others before those bindings&rsquo;
definitions exist. The value of <code>x</code> in <code>f</code> is only looked up once <code>f</code> is
evaluated. We&rsquo;re referencing symbols statically, but the lookup is dynamic. That
means anything any symbols referencing symbols that come after have to be
wrapped in a <code>lambda</code>; if you try to look up too early, it won&rsquo;t work.
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span class="org-comment-delimiter">; </span><span class="org-comment">Trying to reference a value immediately</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">letrec</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">[</span>six <span class="org-rainbow-delimiters-depth-4">(</span>+ x 1<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">]</span>
         <span class="org-rainbow-delimiters-depth-3">[</span>x 5<span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">)</span>
  #t<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Result:
</p>

<div class="org-src-container">
<pre class="src src-example">Error: struct:exn:fail:contract:variable

x: undefined;
 cannot use before initialization
</pre>
</div>

<p>
You can see this fails at the point that we try to look up <code>x</code> during the binding
of <code>six</code>. Now using a <code>lambda</code> (and with <code>let</code> since it behaves in the same way and
this example only binds one symbol anyways):
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span class="org-comment-delimiter">; </span><span class="org-comment">loophole?</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">[</span>f <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">&#955;</span> <span class="org-rainbow-delimiters-depth-5">()</span> <span class="org-rainbow-delimiters-depth-5">(</span>+ x 1<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">)</span>
  f<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Here, <code>x</code> isn&rsquo;t bound anywhere, but <code>f</code> can still be bound and returned! But if we
actually try to evaluate <code>f</code>, we&rsquo;ll run into problems.
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span class="org-comment-delimiter">; </span><span class="org-comment">=&gt; Error: struct:exn:fail:contract</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">[</span>f <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">&#955;</span> <span class="org-rainbow-delimiters-depth-5">()</span> <span class="org-rainbow-delimiters-depth-5">(</span>+ x 1<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>f<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
</div>
</p>

</div>

<div class="lines">
<p>
<div class="outline-3"><h3><a href="./dynamic-scope-in-racket.html"> Dynamic Scope In Racket</a><span> </span><span class="timestamp-wrapper"><span class="timestamp">( March 10, 2016)</span></span></h3>
</p>

<p>
One way to do dynamic scope is with <a href="https://www.gnu.org/software/mit-scheme/documentation/mit-scheme-ref/Dynamic-Binding.html">fluid-let</a>, which basically reassigns the
value of a variable instead of creating a shadow, but though this is available
in Scheme, it&rsquo;s not available in Racket.
</p>

<p>
Racket has a form named <a href="https://docs.racket-lang.org/guide/parameterize.html">parameterize</a>, that allows you to pass variables
dynamically, but forces you to set a default value.
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">define</span> <span class="org-function-name">x</span> <span class="org-rainbow-delimiters-depth-2">(</span>make-parameter 2<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">define</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">incr-x</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span>+ <span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-rainbow-delimiters-depth-3">)</span> 1<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">define</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">dynamic-x</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">parameterize</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">[</span>x 5<span class="org-rainbow-delimiters-depth-4">]</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>incr-x<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
<code>make-parameter</code> creates a function <code>x</code> that returns the value. Evaluating <code>(x)</code>
results in <code>2</code>.
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span class="org-rainbow-delimiters-depth-1">(</span>incr-x<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-comment-delimiter">;</span><span class="org-comment">=&gt; 3</span>
</pre>
</div>

<p>
However, you can associate a new value to the <code>x</code> parameter using <code>parameterize</code>:
</p>

<div class="org-src-container">
<pre class="src src-scheme"><span class="org-rainbow-delimiters-depth-1">(</span>dynamic-x<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-comment-delimiter">;</span><span class="org-comment">=&gt; 6</span>
</pre>
</div>

<p>
An advantage of <code>parameterize</code> over imperative updates of parameter values is
that the implementation is thread-safe, and continuation-friendly. There are a
few other pluses in addition to that, which you can check out in the docs.
</p>

<p>
</div>
</p>

</div>

<div class="lines">
<p>
<div class="outline-3"><h3><a href="./s-expressions-as-a-lightweight-serialization-format.html"> S-expressions as a Lightweight Serialization Format</a><span> </span><span class="timestamp-wrapper"><span class="timestamp">( February 17, 2016)</span></span></h3>
</p>

<p>
I&rsquo;ve been writing a desktop application that uses OCaml for the backend, and
Racket for the GUI frontend. To communicate between the two, I call the OCaml
program as a subprocess from Racket, and have s-expressions be the serialization
mechanism that both languages can understand. Jane Street&rsquo;s <a href="https://github.com/janestreet/core">Core</a>, along with the
<code>sexplib</code> syntax extension mentioned in my previous post, offer an easy way to
translate OCaml types to sexps that Racket can then read.
</p>

<p>
With a type like:
</p>
<div class="org-src-container">
<pre class="src src-ocaml"><span class="org-tuareg-font-lock-governing">type</span> <span class="org-type">book</span> <span class="org-tuareg-font-lock-operator">=</span> <span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-1">{</span></span>
  title        <span class="org-tuareg-font-lock-operator">:</span> string<span class="org-tuareg-font-lock-operator">;</span>
  authors      <span class="org-tuareg-font-lock-operator">:</span> string list<span class="org-tuareg-font-lock-operator">;</span>
  pubdate      <span class="org-tuareg-font-lock-operator">:</span> string<span class="org-tuareg-font-lock-operator">;</span>
  publishers   <span class="org-tuareg-font-lock-operator">:</span> string list<span class="org-tuareg-font-lock-operator">;</span>
  subjects     <span class="org-tuareg-font-lock-operator">:</span> string list
<span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-1">}</span></span> <span class="org-keyword">with</span> sexp
</pre>
</div>

<p>
A <code>sexp_of_book</code> function is automatically generated.
</p>

<p>
Now racket can receive:
</p>
<div class="org-src-container">
<pre class="src src-scheme">'<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>title <span class="org-string">"Purely functional data structures"</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>authors <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Chris Okasaki"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>pubdate 1999<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>publishers <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Cambridge University Press"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>subjects <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Functional programming languages"</span> <span class="org-string">"Data structures (Computer science)"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
I take this sexp, and create a <code>book</code> struct:
</p>
<div class="org-src-container">
<pre class="src src-scheme"><span class="org-rainbow-delimiters-depth-1">(</span>struct book <span class="org-rainbow-delimiters-depth-2">(</span>title authors pubdate publishers subjects<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">define</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">isbn-lookup</span> isbn<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">[</span>cmd <span class="org-rainbow-delimiters-depth-5">(</span>string-join <span class="org-rainbow-delimiters-depth-6">(</span>list homelib-binary isbn<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">]</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">&#955;</span>~&gt;&gt; process    <span class="org-comment-delimiter">; </span><span class="org-comment">-&gt; '(stdout stdin proc-id stderr f)</span>
           car
           read       <span class="org-comment-delimiter">; </span><span class="org-comment">from an input port</span>
           <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-keyword">map</span> cadr<span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-comment-delimiter">; </span><span class="org-comment">(k v) -&gt; v</span>
           <span class="org-rainbow-delimiters-depth-5">(</span>apply book<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
     cmd<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Finally, we can test it out on the REPL to make sure it works:
</p>
<div class="org-src-container">
<pre class="src src-scheme">racket@app.rkt&gt; <span class="org-rainbow-delimiters-depth-1">(</span>isbn-lookup <span class="org-string">"0521663504"</span><span class="org-rainbow-delimiters-depth-1">)</span>
#&lt;book&gt;

racket@app.rkt&gt; <span class="org-rainbow-delimiters-depth-1">(</span>book-title <span class="org-rainbow-delimiters-depth-2">(</span>isbn-lookup <span class="org-string">"0521663504"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-string">"Purely functional data structures"</span>

racket@app.rkt&gt; <span class="org-rainbow-delimiters-depth-1">(</span>book-subjects <span class="org-rainbow-delimiters-depth-2">(</span>isbn-lookup <span class="org-string">"0521663504"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
'<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Functional programming languages"</span> <span class="org-string">"Data structures (Computer science)"</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Similarly, I can work in the other direction, and pass Racket s-expressions to
OCaml, and using sexplib, convert them back to OCaml types. What a time to be
alive!
</p>

<p>
</div>
</p>

</div>

<div class="lines">
<p>
<div class="outline-3"><h3><a href="./adding-syntax-extensions-to-an-ocaml-project.html"> Adding Syntax Extensions To An OCaml Project</a><span> </span><span class="timestamp-wrapper"><span class="timestamp">( February 8, 2016)</span></span></h3>
</p>

<p>
Here&rsquo;s the set of steps needed to start using syntax extensions. I&rsquo;ll be using
<a href="https://github.com/janestreet/sexplib">sexplib</a> as the example.
</p>

<p>
First, you have to add the extension to your <code>.merlin</code> file:
</p>
<pre class="example">
PKG core yojson lwt cohttp cohttp.lwt
EXT sexplib.syntax
</pre>

<p>
Now Merlin&rsquo;s minor mode won&rsquo;t throw up errors when you save. Next up is
compiling the project. I&rsquo;m using <a href="http://oasis.forge.ocamlcore.org/">Oasis</a>. Add <code>sexplib</code> and its <code>.syntax</code> file to the
<code>BuildDepends</code> in the <code>_oasis</code> file:
</p>

<pre class="example">
(other stuff)

Executable myprogram
  Path: src
  BuildTools: ocamlbuild
  MainIs: main.ml
  CompiledObject: best
  BuildDepends:
    core,
&gt;   sexplib,
&gt;   sexplib.syntax,
    threads,
    yojson,
    lwt,
    cohttp,
    cohttp.lwt
</pre>

<p>
After that, call <code>oasis</code> to add in the new dependencies. I use
</p>
<pre class="example">
oasis setup -setup-update dynamic
</pre>

<p>
Run <code>make</code> again, and the project should build using <code>sexplib</code>!
</p>

</div>

<div class="lines">
<p>
<div class="outline-3"><h3><a href="./on-the-importance-of-enforcing-invariants.html"> On The Importance Of Enforcing Invariants</a><span> </span><span class="timestamp-wrapper"><span class="timestamp">( February 4, 2016)</span></span></h3>
</p>

<p>
Something that comes up early on when learning OCaml is the topic of abstract
types. Comparable to &ldquo;encapsulation&rdquo; in object-oriented programming, one purpose
of abstract types is to protect the programmer from misusing a module&rsquo;s
types. By abstracting the type, for example, presenting a <code>Number.t</code> instead of a
plain <code>int</code> type, the underlying implementation can be swapped out, without
affecting code using the module. Only by using the module can the user create a
value of that type, because only the module knows that <code>Number.t = int</code>, and has
ability to create that type.
</p>

<p>
Abstract types guarantee that the user can never access the concrete type
directly This is known as &ldquo;enforcing invariants&rdquo;, preserving certain properties
about the type, so that you can now assume they will always be true, i.e.,
<i>invariant</i>.  Placing this restriction on library users increases the level of
type safety significantly.
</p>

<p>
On the other hand, sometimes you <i>do</i> want to have concrete types in your
interface, and that&rsquo;s okay too. It gives more flexibility to the user, since
they can construct those types by hand, and have more detail about the internals
of the module.
</p>

<p>
</div>
</p>

</div>

<div class="lines">
<p>
<div class="outline-3"><h3><a href="./universal-quantification-in-ocaml.html"> Universal Quantification in OCaml</a><span> </span><span class="timestamp-wrapper"><span class="timestamp">( February 2, 2016)</span></span></h3>
</p>

<p>
The difference between OCaml&rsquo;s type signatures and type annotations is quite
subtle. First of all, signatures are what you put in the mli files, whereas
annotations are inline with your code. When you write a function like:
</p>
<div class="org-src-container">
<pre class="src src-ocaml"><span class="org-tuareg-font-lock-governing">let</span> <span class="org-function-name">foo</span> <span class="org-tuareg-font-lock-operator">:</span> <span class="org-type">'a </span><span class="org-tuareg-font-lock-operator">-&gt;</span><span class="org-type"> 'a </span><span class="org-tuareg-font-lock-operator">=</span> <span class="org-keyword">fun</span> <span class="org-variable-name">x</span> <span class="org-tuareg-font-lock-operator">-&gt;</span> 0
</pre>
</div>
<p>
the type of <code>foo</code> resolves to <code>int -&gt; int</code>, because <code>'a</code> is
serving as a unification variable and not a type parameter. In order to force
the compiler to not constrain the function to the concrete type <code>int</code>, you need
to annotate:
</p>
<div class="org-src-container">
<pre class="src src-ocaml"><span class="org-tuareg-font-lock-governing">let</span> <span class="org-function-name">foo</span> <span class="org-tuareg-font-lock-operator">:</span> <span class="org-type">'a. 'a </span><span class="org-tuareg-font-lock-operator">-&gt;</span><span class="org-type"> 'a </span><span class="org-tuareg-font-lock-operator">=</span> <span class="org-keyword">fun</span> <span class="org-variable-name">x</span> <span class="org-tuareg-font-lock-operator">-&gt;</span> 0
</pre>
</div>
<p>
Essentially, this means &ldquo;for all types &lsquo;a&rdquo;, and now we are dealing with a type
parameter instead, forcing the compiler to keep the function polymorphic. The
mli files work with type parameters by default, so if you are writing type
signatures there you might not run into this problem. However, sometimes your
function will not typecheck (because it&rsquo;s unclear) until you annotate it with
the type ascription, and you&rsquo;ll need to do that before the mli can be checked by
the compiler.
</p>

<p>
There&rsquo;s some more info about this on <a href="http://stackoverflow.com/questions/23323032/in-ocaml-what-type-definition-is-this-a-unit-a">SO</a> and <a href="https://blogs.janestreet.com/ensuring-that-a-function-is-polymorphic-in-ocaml-3-12/">Jane Street&rsquo;s blog</a>.
</p>

<p>
</div>
</p>

</div>

<div class="lines">
<p>
<div class="outline-3"><h3><a href="./automating-blog-posts-with-org-mode.html"> Automating Blog Posts With Org-mode</a><span> </span><span class="timestamp-wrapper"><span class="timestamp">( January 31, 2016)</span></span></h3>
</p>

<p>
The best way to get me writing is to remove all barriers that slow me down. This
especially includes the setup of creating a new post in <code>org-mode</code> and writing its
index entry. It might be really easy but it&rsquo;s annoying to have to do this every
time for each new post. So I whipped up some elisp that does all of this for
me. It just takes the title, keywords, and description of the post, and takes
care of the rest.
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">bryan/blog-new-post</span> <span class="org-rainbow-delimiters-depth-2">(</span>title keywords description<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-doc">"Create a new post"</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">interactive</span> <span class="org-string">"sTitle: \nsKeywords: \nsDescription: "</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(message "Keywords are: %s" keywords)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let*</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>filename-prepared <span class="org-rainbow-delimiters-depth-5">(</span>string-trim
                             <span class="org-rainbow-delimiters-depth-6">(</span>replace-regexp-in-string <span class="org-string">" "</span> <span class="org-string">"-"</span> <span class="org-rainbow-delimiters-depth-7">(</span>downcase title<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>relfile <span class="org-rainbow-delimiters-depth-5">(</span>concat filename-prepared <span class="org-string">".org"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>relfile-html <span class="org-rainbow-delimiters-depth-5">(</span>concat <span class="org-string">"./"</span> filename-prepared <span class="org-string">".html"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>absfile <span class="org-rainbow-delimiters-depth-5">(</span>concat bryan/blog-blogdir relfile<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>date <span class="org-rainbow-delimiters-depth-5">(</span>format-time-string <span class="org-string">"[%Y-%m-%d %a]"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>date-day-not-padded <span class="org-rainbow-delimiters-depth-5">(</span>string-trim <span class="org-rainbow-delimiters-depth-6">(</span>format-time-string <span class="org-string">"%e"</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>mon <span class="org-rainbow-delimiters-depth-5">(</span>format-time-string <span class="org-string">"%B"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>yr <span class="org-rainbow-delimiters-depth-5">(</span>format-time-string <span class="org-string">"%Y"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>date-human-readable
          <span class="org-rainbow-delimiters-depth-5">(</span>concat <span class="org-string">"("</span> mon <span class="org-rainbow-delimiters-depth-6">(</span>format <span class="org-string">" %s, "</span> date-day-not-padded<span class="org-rainbow-delimiters-depth-6">)</span> yr <span class="org-string">")"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
         <span class="org-rainbow-delimiters-depth-4">(</span>my-html-link-and-span
          `<span class="org-rainbow-delimiters-depth-5">(</span>,<span class="org-rainbow-delimiters-depth-6">(</span>html-a
              <span class="org-builtin">:href</span> relfile-html title<span class="org-rainbow-delimiters-depth-6">)</span>
            ,<span class="org-rainbow-delimiters-depth-6">(</span>html-span <span class="org-string">" "</span><span class="org-rainbow-delimiters-depth-6">)</span>
            ,<span class="org-rainbow-delimiters-depth-6">(</span>html-span
              <span class="org-builtin">:class</span> <span class="org-string">"timestamp-wrapper"</span>
              <span class="org-rainbow-delimiters-depth-7">(</span>html-span
               <span class="org-builtin">:class</span> <span class="org-string">"timestamp"</span>
               date-human-readable<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>

    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">with-current-buffer</span> <span class="org-rainbow-delimiters-depth-4">(</span>find-file-noselect bryan/blog-indexfile<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>goto-char <span class="org-rainbow-delimiters-depth-5">(</span>point-min<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>search-forward <span class="org-string">"&gt;@@"</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>insert <span class="org-string">"\n#+BEGIN_HTML\n"</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>html-lite-write-tree-single-line
       <span class="org-rainbow-delimiters-depth-5">(</span>butlast
        <span class="org-rainbow-delimiters-depth-6">(</span>html-div
         <span class="org-builtin">:class</span> <span class="org-string">"outline-3"</span>
         <span class="org-rainbow-delimiters-depth-7">(</span>html-h3
          my-html-link-and-span<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>insert <span class="org-string">"\n#+END_HTML\n"</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>insert <span class="org-rainbow-delimiters-depth-5">(</span>format <span class="org-string">"#+INCLUDE: \"%s\" :lines \"11-\""</span> relfile<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>insert <span class="org-rainbow-delimiters-depth-5">(</span>bryan/org-escape-html <span class="org-string">"&lt;/div&gt;"</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">with-temp-message</span> <span class="org-rainbow-delimiters-depth-5">(</span>format <span class="org-string">"Writing to %s"</span> bryan/blog-indexfile<span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>save-buffer<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>message <span class="org-string">"Writing file...done"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>

    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">with-temp-buffer</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>-each `<span class="org-rainbow-delimiters-depth-5">(</span>,<span class="org-rainbow-delimiters-depth-6">(</span>format <span class="org-string">"#+TITLE: %s\n"</span> title<span class="org-rainbow-delimiters-depth-6">)</span>
               ,<span class="org-rainbow-delimiters-depth-6">(</span>format <span class="org-string">"#+DATE: %s\n"</span> date<span class="org-rainbow-delimiters-depth-6">)</span>
               ,<span class="org-rainbow-delimiters-depth-6">(</span>format <span class="org-string">"#+KEYWORDS: %s\n"</span> keywords<span class="org-rainbow-delimiters-depth-6">)</span>
               ,<span class="org-rainbow-delimiters-depth-6">(</span>format <span class="org-string">"#+DESCRIPTION: %s\n"</span> description<span class="org-rainbow-delimiters-depth-6">)</span>
               <span class="org-string">"#+OPTIONS: title:nil\n\n"</span>
               <span class="org-string">"#+BEGIN_HTML\n"</span><span class="org-rainbow-delimiters-depth-5">)</span>
        #'insert<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>html-lite-write-tree-single-line
       <span class="org-rainbow-delimiters-depth-5">(</span>html-header
        <span class="org-rainbow-delimiters-depth-6">(</span>html-h1 <span class="org-builtin">:class</span> <span class="org-string">"title"</span> my-html-link-and-span<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>insert <span class="org-string">"\n#+END_HTML\n\n"</span><span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">when</span> <span class="org-rainbow-delimiters-depth-5">(</span>file-writable-p absfile<span class="org-rainbow-delimiters-depth-5">)</span>
        <span class="org-rainbow-delimiters-depth-5">(</span>write-region <span class="org-rainbow-delimiters-depth-6">(</span>point-min<span class="org-rainbow-delimiters-depth-6">)</span>
                      <span class="org-rainbow-delimiters-depth-6">(</span>point-max<span class="org-rainbow-delimiters-depth-6">)</span>
                      absfile<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>find-file absfile<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>goto-char <span class="org-rainbow-delimiters-depth-3">(</span>point-max<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>message <span class="org-string">"Generated template"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
</div>
</p>

</div>

<div class="lines">
<p>
<div class="outline-3"><h3><a href="./basic-graph-traversal-in-ocaml.html"> Basic Graph Traversal in OCaml</a><span> </span><span class="timestamp-wrapper"><span class="timestamp">( January 28, 2016)</span></span></h3>
</p>

<p>
This is my solution to Cracking The Coding Interview problem 4.2.
The problem is: Given a directed graph, design an algorithm to find out whether
there is a route between two nodes.
</p>

<p>
Keep in mind that I&rsquo;ve only been writing OCaml for a few weeks. There is
probably a more elegant solution. Once my OCaml is more advanced, I&rsquo;ll make a
new post. This solution does BFS traversal, returning <code>None</code> early when it can&rsquo;t
traverse any further and hasn&rsquo;t reached the destination node.
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span class="org-tuareg-font-lock-governing">module</span> <span class="org-tuareg-font-lock-module">Graph</span> <span class="org-tuareg-font-lock-operator">=</span>
<span class="org-tuareg-font-lock-governing">struct</span>
  <span class="org-tuareg-font-lock-governing">type</span> <span class="org-type">node</span>   <span class="org-tuareg-font-lock-operator">=</span> int
  <span class="org-tuareg-font-lock-governing">type</span> <span class="org-type">graph</span>  <span class="org-tuareg-font-lock-operator">=</span> <span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-1">{</span></span> nodes <span class="org-tuareg-font-lock-operator">:</span> node list<span class="org-tuareg-font-lock-operator">;</span> edges <span class="org-tuareg-font-lock-operator">:</span> <span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-2">(</span></span>node<span class="org-tuareg-font-lock-operator">*</span>node<span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-2">)</span></span> list <span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-1">}</span></span>
  <span class="org-tuareg-font-lock-governing">let</span> <span class="org-variable-name">mk</span> <span class="org-tuareg-font-lock-operator">=</span> <span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-1">{</span></span> nodes<span class="org-tuareg-font-lock-operator">=</span><span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-2">[]</span></span> <span class="org-tuareg-font-lock-operator">;</span> edges<span class="org-tuareg-font-lock-operator">=</span> <span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-2">[]</span></span> <span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-1">}</span></span>

  <span class="org-tuareg-font-lock-governing">let</span> <span class="org-function-name">mk_outgoing</span><span class="org-variable-name"> g</span> <span class="org-tuareg-font-lock-operator">=</span>
    <span class="org-keyword">fun</span> <span class="org-variable-name">n</span> <span class="org-tuareg-font-lock-operator">-&gt;</span>
      <span class="org-tuareg-font-lock-governing">let</span> <span class="org-function-name">keep</span><span class="org-variable-name"> </span><span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-variable-name">left</span><span class="org-tuareg-font-lock-operator">,</span><span class="org-variable-name">_</span><span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-variable-name"> </span><span class="org-keyword">as</span><span class="org-variable-name"> edge</span><span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-1">)</span></span><span class="org-variable-name"> acc</span> <span class="org-tuareg-font-lock-operator">=</span> <span class="org-keyword">if</span> left <span class="org-tuareg-font-lock-operator">=</span> n <span class="org-keyword">then</span> <span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-1">[</span></span>edge<span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-1">]</span></span> <span class="org-tuareg-font-lock-operator">@</span> acc <span class="org-keyword">else</span> acc <span class="org-tuareg-font-lock-governing">in</span>
      <span class="org-tuareg-font-lock-governing">let</span> <span class="org-variable-name">next_to</span> <span class="org-tuareg-font-lock-operator">=</span> <span class="org-tuareg-font-lock-module">List.</span>fold_right g.edges <span class="org-tuareg-font-lock-label">~f</span><span class="org-tuareg-font-lock-operator">:</span>keep <span class="org-tuareg-font-lock-label">~init</span><span class="org-tuareg-font-lock-operator">:</span><span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-1">[]</span></span> <span class="org-tuareg-font-lock-governing">in</span>
      <span class="org-tuareg-font-lock-module">Int.Set.</span>of_list <span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-tuareg-font-lock-module">List.</span>map next_to <span class="org-tuareg-font-lock-label">~f</span><span class="org-tuareg-font-lock-operator">:</span>snd<span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-1">)</span></span>

  <span class="org-tuareg-font-lock-governing">let</span> <span class="org-function-name">bfs_traverse_until</span><span class="org-variable-name"> g root </span><span class="org-tuareg-font-lock-label">~f</span><span class="org-tuareg-font-lock-operator">:</span><span class="org-variable-name">action</span> <span class="org-tuareg-font-lock-operator">=</span>
    <span class="org-tuareg-font-lock-governing">let</span> <span class="org-variable-name">outgoing</span> <span class="org-tuareg-font-lock-operator">=</span> mk_outgoing g
    <span class="org-tuareg-font-lock-governing">and</span> <span class="org-variable-name">visited</span>  <span class="org-tuareg-font-lock-operator">=</span> <span class="org-tuareg-font-lock-module">Int.Set.</span>empty
    <span class="org-tuareg-font-lock-governing">and</span> <span class="org-variable-name">to_visit</span> <span class="org-tuareg-font-lock-operator">=</span> <span class="org-tuareg-font-lock-module">Queue.</span>create <span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-1">()</span></span> <span class="org-tuareg-font-lock-governing">in</span>
    <span class="org-tuareg-font-lock-module">Queue.</span>enqueue to_visit root<span class="org-tuareg-font-lock-operator">;</span>
    <span class="org-tuareg-font-lock-governing">let</span> <span class="org-tuareg-font-lock-governing">rec</span> <span class="org-function-name">loop</span><span class="org-variable-name"> visited</span> <span class="org-tuareg-font-lock-operator">=</span>
      <span class="org-tuareg-font-lock-module">Option.</span>value_map
        <span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-tuareg-font-lock-module">Queue.</span>dequeue to_visit<span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-1">)</span></span>
        <span class="org-tuareg-font-lock-label">~default</span><span class="org-tuareg-font-lock-operator">:</span><span class="org-tuareg-font-lock-constructor">None</span>
        <span class="org-tuareg-font-lock-label">~f</span><span class="org-tuareg-font-lock-operator">:</span><span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-1">(</span></span><span class="org-keyword">fun</span> <span class="org-variable-name">id</span> <span class="org-tuareg-font-lock-operator">-&gt;</span>
            <span class="org-keyword">if</span> action id <span class="org-keyword">then</span> <span class="org-tuareg-font-lock-constructor">Some</span> id
            <span class="org-keyword">else</span> <span class="org-tuareg-font-lock-governing">begin</span>
              <span class="org-keyword">if</span> <span class="org-tuareg-font-lock-operator">not</span> <span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-tuareg-font-lock-module">Int.Set.</span>mem visited id<span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-2">)</span></span> <span class="org-keyword">then</span>
                <span class="org-tuareg-font-lock-governing">let</span> <span class="org-variable-name">children</span> <span class="org-tuareg-font-lock-operator">=</span> <span class="org-tuareg-font-lock-module">Int.Set.</span>diff <span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-2">(</span></span>outgoing id<span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-2">)</span></span> visited <span class="org-tuareg-font-lock-governing">in</span>
                <span class="org-tuareg-font-lock-module">Int.Set.</span>iter children <span class="org-tuareg-font-lock-label">~f</span><span class="org-tuareg-font-lock-operator">:</span><span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-keyword">fun</span> <span class="org-variable-name">n</span> <span class="org-tuareg-font-lock-operator">-&gt;</span> <span class="org-tuareg-font-lock-module">Queue.</span>enqueue to_visit n<span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-tuareg-font-lock-operator">;</span>
                <span class="org-tuareg-font-lock-governing">let</span> <span class="org-variable-name">visited'</span> <span class="org-tuareg-font-lock-operator">=</span> <span class="org-tuareg-font-lock-module">Int.Set.</span>add visited id <span class="org-tuareg-font-lock-governing">in</span>
                loop visited'
              <span class="org-keyword">else</span>
                loop visited
            <span class="org-tuareg-font-lock-governing">end</span>
          <span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-1">)</span></span>
    <span class="org-tuareg-font-lock-governing">in</span> loop visited

  <span class="org-tuareg-font-lock-governing">let</span> <span class="org-function-name">route</span><span class="org-variable-name"> g n1 n2</span> <span class="org-tuareg-font-lock-operator">=</span>
    <span class="org-tuareg-font-lock-module">Option.</span>is_some <span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-1">(</span></span>bfs_traverse_until g n1 <span class="org-tuareg-font-lock-label">~f</span><span class="org-tuareg-font-lock-operator">:</span><span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-2">(</span></span><span class="org-keyword">fun</span> <span class="org-variable-name">node</span> <span class="org-tuareg-font-lock-operator">-&gt;</span> node <span class="org-tuareg-font-lock-operator">=</span> n2<span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-2">)</span></span><span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-1">)</span></span>
<span class="org-tuareg-font-lock-governing">end</span>

<span class="org-tuareg-font-lock-governing">let</span> <span class="org-variable-name">my_graph</span> <span class="org-tuareg-font-lock-operator">:</span> <span class="org-tuareg-font-lock-module">Graph.</span><span class="org-type">graph </span><span class="org-tuareg-font-lock-operator">=</span>
  <span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-1">{</span></span> <span class="org-tuareg-font-lock-module">Graph.</span>nodes <span class="org-tuareg-font-lock-operator">=</span> <span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-2">[</span></span>1<span class="org-tuareg-font-lock-operator">;</span>2<span class="org-tuareg-font-lock-operator">;</span>3<span class="org-tuareg-font-lock-operator">;</span>4<span class="org-tuareg-font-lock-operator">;</span>5<span class="org-tuareg-font-lock-operator">;</span>6<span class="org-tuareg-font-lock-operator">;</span>7<span class="org-tuareg-font-lock-operator">;</span>8<span class="org-tuareg-font-lock-operator">;</span>9<span class="org-tuareg-font-lock-operator">;</span>10<span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-2">]</span></span>
  <span class="org-tuareg-font-lock-operator">;</span> <span class="org-tuareg-font-lock-module">Graph.</span>edges <span class="org-tuareg-font-lock-operator">=</span> <span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-2">[</span></span><span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">(</span></span>1<span class="org-tuareg-font-lock-operator">,</span>2<span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-tuareg-font-lock-operator">;</span> <span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">(</span></span>1<span class="org-tuareg-font-lock-operator">,</span>3<span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-tuareg-font-lock-operator">;</span> <span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">(</span></span>1<span class="org-tuareg-font-lock-operator">,</span>5<span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-tuareg-font-lock-operator">;</span> <span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">(</span></span>1<span class="org-tuareg-font-lock-operator">,</span>8<span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-tuareg-font-lock-operator">;</span> <span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">(</span></span>1<span class="org-tuareg-font-lock-operator">,</span>9<span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">)</span></span>
                  <span class="org-tuareg-font-lock-operator">;</span><span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">(</span></span>2<span class="org-tuareg-font-lock-operator">,</span>3<span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-tuareg-font-lock-operator">;</span> <span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">(</span></span>2<span class="org-tuareg-font-lock-operator">,</span>10<span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-tuareg-font-lock-operator">;</span> <span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">(</span></span>2<span class="org-tuareg-font-lock-operator">,</span>7<span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">)</span></span>
                  <span class="org-tuareg-font-lock-operator">;</span><span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">(</span></span>3<span class="org-tuareg-font-lock-operator">,</span>8<span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">)</span></span>
                  <span class="org-tuareg-font-lock-operator">;</span><span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">(</span></span>4<span class="org-tuareg-font-lock-operator">,</span>6<span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-tuareg-font-lock-operator">;</span> <span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">(</span></span>4<span class="org-tuareg-font-lock-operator">,</span>10<span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">)</span></span>
                  <span class="org-tuareg-font-lock-operator">;</span><span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">(</span></span>5<span class="org-tuareg-font-lock-operator">,</span>4<span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-tuareg-font-lock-operator">;</span> <span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">(</span></span>5<span class="org-tuareg-font-lock-operator">,</span>6<span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">)</span></span>
                  <span class="org-tuareg-font-lock-operator">;</span><span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">(</span></span>6<span class="org-tuareg-font-lock-operator">,</span>3<span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">)</span></span>
                  <span class="org-tuareg-font-lock-operator">;</span><span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">(</span></span>7<span class="org-tuareg-font-lock-operator">,</span>8<span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-tuareg-font-lock-operator">;</span> <span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">(</span></span>7<span class="org-tuareg-font-lock-operator">,</span>10<span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-tuareg-font-lock-operator">;</span> <span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">(</span></span>7<span class="org-tuareg-font-lock-operator">,</span>1<span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">)</span></span>
                  <span class="org-tuareg-font-lock-operator">;</span><span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">(</span></span>8<span class="org-tuareg-font-lock-operator">,</span>9<span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-tuareg-font-lock-operator">;</span> <span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">(</span></span>8<span class="org-tuareg-font-lock-operator">,</span>6<span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">)</span></span>
                  <span class="org-tuareg-font-lock-operator">;</span><span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">(</span></span>9<span class="org-tuareg-font-lock-operator">,</span>6<span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-tuareg-font-lock-operator">;</span> <span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">(</span></span>9<span class="org-tuareg-font-lock-operator">,</span>3<span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">)</span></span>
                  <span class="org-tuareg-font-lock-operator">;</span><span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">(</span></span>10<span class="org-tuareg-font-lock-operator">,</span>9<span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-tuareg-font-lock-operator">;</span> <span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">(</span></span>10<span class="org-tuareg-font-lock-operator">,</span>8<span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-3">)</span></span><span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-2">]</span></span> <span class="org-tuareg-font-lock-operator"><span class="org-rainbow-delimiters-depth-1">}</span></span>
</pre>
</div>

<p>
Here&rsquo;s how I tested it:
</p>
<pre class="example">
utop[2]&gt; Graph.route;;
- : Graph.graph -&gt; int -&gt; int -&gt; bool = &lt;fun&gt;
utop[4]&gt; Graph.route my_graph 1 10;;
- : bool = true
utop[5]&gt; Graph.route my_graph 10 1;;
- : bool = false
utop[6]&gt; Graph.route my_graph 3 9;;
- : bool = true
utop[7]&gt; Graph.route my_graph 4 7;;
- : bool = false
</pre>

<p>
</div>
</p>

</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<a href="archive.html">Archive</a>
</div>
</body>
</html>
